
# platform = multi_platform_all
apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
spec:
  config:
    ignition:
      version: 2.2.0
    storage:
      files:
      - contents:
          source: data:,%23%20Use%20public%20servers%20from%20the%20pool.ntp.org%20project.%0A%23%20Please%20consider%20joining%20the%20pool%20%28http%3A//www.pool.ntp.org/join.html%29.%0Apool%202.rhel.pool.ntp.org%20iburst%0A%0A%23%20Record%20the%20rate%20at%20which%20the%20system%20clock%20gains/losses%20time.%0Adriftfile%20/var/lib/chrony/drift%0A%0A%23%20Allow%20the%20system%20clock%20to%20be%20stepped%20in%20the%20first%20three%20updates%0A%23%20if%20its%20offset%20is%20larger%20than%201%20second.%0Amakestep%201.0%203%0A%0A%23%20Enable%20kernel%20synchronization%20of%20the%20real-time%20clock%20%28RTC%29.%0Artcsync%0A%0A%23%20Enable%20hardware%20timestamping%20on%20all%20interfaces%20that%20support%20it.%0A%23hwtimestamp%20%2A%0A%0A%23%20Increase%20the%20minimum%20number%20of%20selectable%20sources%20required%20to%20adjust%0A%23%20the%20system%20clock.%0A%23minsources%202%0A%0A%23%20Allow%20NTP%20client%20access%20from%20local%20network.%0A%23allow%20192.168.0.0/16%0A%0A%23%20Serve%20time%20even%20if%20not%20synchronized%20to%20a%20time%20source.%0A%23local%20stratum%2010%0A%0A%23%20Specify%20file%20containing%20keys%20for%20NTP%20authentication.%0Akeyfile%20/etc/chrony.keys%0A%0A%23%20Get%20TAI-UTC%20offset%20and%20leap%20seconds%20from%20the%20system%20tz%20database.%0Aleapsectz%20right/UTC%0A%0A%23%20Specify%20directory%20for%20log%20files.%0Alogdir%20/var/log/chrony%0A%0A%23%20Select%20which%20information%20is%20logged.%0A%23log%20measurements%20statistics%20tracking%0A%0A%23%20The%20port%20option%20in%20/etc/chrony.conf%20can%20be%20set%20to%200%20to%20make%20chrony%0A%23%20daemon%20to%20never%20open%20any%20listening%20port%20for%20server%20operation%20and%20to%20operate%0A%23%20strictly%20in%20a%20client-only%20mode.%0A%23%20Minimizing%20the%20exposure%20of%20the%20server%20functionality%20of%20the%20chrony%20daemon%0A%23%20diminishes%20the%20attack%20surface.%0Aport%200%0A%0A%23%20The%20cmdport%20option%20in%20/etc/chrony.conf%20can%20be%20set%20to%200%20to%20stop%20chrony%0A%23%20daemon%20from%20listening%20on%20the%20UDP%20port%20323%20for%20management%20connections%20made%0A%23%20by%20chronyc.%0A%23%20Not%20exposing%20the%20management%20interface%20of%20the%20chrony%20daemon%20on%20the%20network%0A%23%20diminishes%20the%20attack%20space.%0Acmdport%200%0A
        filesystem: root
        mode: 0644
        path: /etc/chrony.conf

